import { Button, ModalDialog, useModal } from '@equisoft/design-elements-react';
import { Meta, Preview, ArgsTable, Story } from '@storybook/addon-docs/blocks';
import { Fragment, useState } from 'react';

<Meta title="Modal / Modal Dialog" component={ModalDialog} />

# Modal Dialog

The `ModalDialog` component allows you to easily set dialog modals up in your app.

## Import

```js
    import { ModalDialog, useModal } from '@equisoft/design-elements-react'
```

## Accessibility

It is important for users of screenreaders that other page content be hidden (via the aria-hidden attribute) while the modal is open. To allow `ModalDialog` to do this, you should set `appElement` prop to a query selector identifying the root of your app. For example, if your app content is located inside an element with the ID `root`, you should set the `appElement` prop like this:

```jsx
<ModalDialog
    appElement="#root"
    isOpen={isModalOpen}
    onRequestClose={closeModal}
>
    Some Content
</ModalDialog>
```

## Props

<ArgsTable of={ModalDialog} />

## Examples

### Basic modal

<Preview>
  <Story name="Normal">
        {() => {
            const { isModalOpen, closeModal, openModal } = useModal();
            return (
                <Fragment>
                    <Button label="Open Modal" buttonType="primary" onClick={openModal}/>
                    <ModalDialog
                        appElement="#root"
                        ariaDescribedby="story-description"
                        isOpen={isModalOpen}
                        onRequestClose={closeModal}
                        title="Heading 5"
                        subtitle="Subtitle 1"
                    >
                        <p id="story-description">Lorem ipsum dolor sit amet, consectetur adipiscing elit. Vivamus fringilla tellus nec auctor gravida.</p>
                    </ModalDialog>
                </Fragment>
            );
        }}
  </Story>
</Preview>

### Custom button labels

<Preview>
  <Story name="Custom button labels">
        {() => {
            const { isModalOpen, closeModal, openModal } = useModal();
            return (
                <Fragment>
                    <Button label="Open Modal" buttonType="primary" onClick={openModal}/>
                    <ModalDialog
                        appElement="#root"
                        ariaDescribedby="story-description"
                        isOpen={isModalOpen}
                        onRequestClose={closeModal}
                        confirmButton={{
                            label: 'Custom Confirm'
                        }}
                        cancelButton={{
                            label: 'Custom Cancel'
                        }}
                        title="Heading 5"
                        subtitle="Subtitle 1"
                    >
                        <p id="story-description">Lorem ipsum dolor sit amet, consectetur adipiscing elit. Vivamus fringilla tellus nec auctor gravida.</p>
                    </ModalDialog>
                </Fragment>
            );
        }}
  </Story>
</Preview>

### Confirm callback

<Preview>
  <Story name="Confirm callback">
        {() => {
            const { isModalOpen, closeModal, openModal } = useModal();
            const handleConfirm = () => {
                console.log('confirmed');
                closeModal();
            };
            return (
                <Fragment>
                    <Button label="Open Modal" buttonType="primary" onClick={openModal}/>
                    <ModalDialog
                        appElement="#root"
                        ariaDescribedby="story-description"
                        isOpen={isModalOpen}
                        confirmButton={{
                            onConfirm: handleConfirm,
                        }}
                        onRequestClose={closeModal}
                        title="Heading 5"
                        subtitle="Subtitle 1"
                    >
                        <p id="story-description">Lorem ipsum dolor sit amet, consectetur adipiscing elit. Vivamus fringilla tellus nec auctor gravida.</p>
                    </ModalDialog>
                </Fragment>
            );
        }}
  </Story>
</Preview>

### Cancel callback

<Preview>
  <Story name="Cancel callback">
        {() => {
            const { isModalOpen, closeModal, openModal } = useModal();
            const handleCancel = () => {
                console.log('canceled');
                closeModal();
            };
            return (
                <Fragment>
                    <Button label="Open Modal" buttonType="primary" onClick={openModal}/>
                    <ModalDialog
                        appElement="#root"
                        ariaDescribedby="story-description"
                        isOpen={isModalOpen}
                        cancelButton={{
                            onCancel: handleCancel,
                        }}
                        onRequestClose={closeModal}
                        title="Heading 5"
                        subtitle="Subtitle 1"
                    >
                        <p id="story-description">Lorem ipsum dolor sit amet, consectetur adipiscing elit. Vivamus fringilla tellus nec auctor gravida.</p>
                    </ModalDialog>
                </Fragment>
            );
        }}
  </Story>
</Preview>

### No titles

<Preview>
  <Story name="No titles">
        {() => {
            const { isModalOpen, closeModal, openModal } = useModal();
            return (
                <Fragment>
                    <Button label="Open Modal" buttonType="primary" onClick={openModal}/>
                    <ModalDialog
                        appElement="#root"
                        ariaLabel="Modal label"
                        ariaDescribedby="story-description"
                        isOpen={isModalOpen}
                        onRequestClose={closeModal}
                    >
                        <p id="story-description">Lorem ipsum dolor sit amet, consectetur adipiscing elit. Vivamus fringilla tellus nec auctor gravida.</p>
                    </ModalDialog>
                </Fragment>
            );
        }}
  </Story>
</Preview>
